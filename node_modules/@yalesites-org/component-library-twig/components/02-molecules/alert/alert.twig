{#
 # Available Variables:
 # - alert__id: unique id (must be unique to each site)
 # - alert__type: emergency, announcement (default), marketing
 # - alert__heading
 # - alert__content
 # - alert__link__content
 # - alert__link__url
 #}

{% set alert__base_class = 'alert' %}
{% set alert__type = alert__type|default('announcement') %}

{# Set emergency icons #}
{% if alert__type == 'emergency' %}
  {% set alert__icon = 'triangle-exclamation' %}
  {% set alert__toggle = 'angle-down' %}
  {% set alert__toggle__text = 'Hide alert details' %}
  {% set alert__toggle__aria_expanded = 'true' %}
{# Set announcement icons #}
{% elseif alert__type == 'announcement' %}
  {% set alert__icon = 'circle-info' %}
  {% set alert__toggle = 'xmark' %}
  {% set alert__toggle__text = 'Close alert' %}
{# Set marketign icon #}
{% else %}
  {% set alert__toggle = 'xmark' %}
  {% set alert__toggle__text = 'Close alert' %}
{% endif %}

{% set alert__attributes = {
  'data-component-width': 'max',
  'data-alert-id': 'ys-alert-id-' ~ alert__id,
  'data-alert-state': alert__state|default('expanded'),
  'data-alert-type': alert__type,
  class: bem(alert__base_class),
} %}

<div {{ add_attributes(alert__attributes) }}>
  <div {{ bem('inner', [], alert__base_class) }}>
    {% if alert__icon %}
      <div {{ bem('icon', ['type'], alert__base_class) }}>
        {% include "@atoms/images/icons/_icon.twig" with {
          icon__name: alert__icon,
          icon__decorative: true,
        } %}
      </div>
    {% endif %}
    <div {{ bem('content', [], alert__base_class) }}>
      <div {{ bem('content-inner', [], alert__base_class) }}>
        {% include "@atoms/typography/headings/heading.twig" with {
          heading__level: '2',
          heading__blockname: alert__base_class,
          heading: alert__heading,
        } %}
        {% if alert__content %}
          {% include "@atoms/typography/text/text.twig" with {
            text__element: 'div',
            text__content: alert__content,
            text__blockname: alert__base_class,
          } %}
        {% endif %}
      </div>
      {% if alert__link__content and alert__link__url %}
        {% include "@atoms/controls/text-link/text-link.twig" with {
          link__content: alert__link__content,
          link__url: alert__link__url,
          link__blockname: alert__base_class,
        } %}
      {% endif %}
    </div>
    {% embed "@atoms/controls/cta/cta.twig" with {
      cta__base_class: 'toggle',
      cta__blockname: alert__base_class,
      aria_expanded: alert__toggle__aria_expanded,
    } %}
      {% block cta__content %}
        <span {{ bem('visually-hidden') }}>{{ alert__toggle__text }}</span>
        {% include "@atoms/images/icons/_icon.twig" with {
          icon__name: alert__toggle,
          icon__decorative: true,
        } %}
      {% endblock %}
    {% endembed %}
  </div>
</div>
